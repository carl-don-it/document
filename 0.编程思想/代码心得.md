1. 加锁一定要在try里面，这样才能保证finally块可以解锁
2. 根据生命周期划分功能模块，遵循开闭原则，想好各个生命周期之间的关系，以类替代方法。