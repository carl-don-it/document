# 4-7 图片验证码

## 实现图形验证码功能

* 开发生成图形验证码接口
* 在认证流程中加入图形验证码校验filter，成功下一个，失败写响应报文
* 重构代码

## 生成图形验证码

* 根据随机数生成图片
* 将随机数存到 Session 中
* 将生成的图片写到接口的响应中

## 重构图形验证码接口

* 验证码基本参数可配置
* 验证码拦截的接口可配置
* 验证码的生成逻辑可配置

### 验证码基本参数可配置

* 默认配置

  > 配置值写在 imooc-security-core

* 应用级配置

  > 配置值写在 imooc-security-demo

* 请求级配置

  > 配置值在调用接口时传递

## **验证码的生成逻辑可配置**

> 扩张功能使用接口，自定义一个默认实现类；另外接口的实际实现类可以更改
>
> 应用到spring用bean工厂搭配@`ConditionalOnMissingBean`