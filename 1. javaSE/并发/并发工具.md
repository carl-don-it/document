# ThreadPoolExecutor

`java.util.concurrent.ThreadPoolExecutor#addWorker`

1. 先检查pool的state，如果不适合，那么就不创建。

2. 如果worker count不越界，那么就创建worker，先修改worker count。如果修改成功，进入下一环节，正式创建worker，否则，要重新检查pool state，再尝试修改worker count。

3. 正式创建线程，有可能创建失败，或者线程已经启动了，这些都不是符合要求的。

   创建前先检查状态，如果不符合，那么不创建，如果最后没有成功运行，那么需要删除。